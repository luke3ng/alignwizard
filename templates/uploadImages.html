{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<style>
  .inputoutput {
    border: 2px solid black;
    margin: 10px;
    padding: 10px;
    display: inline-block;
    text-align: center;
  }
  .caption {
    margin-top: 10px;
  }
  .container {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
  }
</style>

<h2>Hello</h2>
<div class="container">
  <div class="inputoutput">
    <img id="imageSrcFront" alt="No Image" style="width: 200px; height: 200px;" />
    <div class="caption">Front <input type="file" id="fileInputFront" name="fileInputFront" /></div>
  </div>
  <div class="inputoutput">
    <img id="imageSrcBack" alt="No Image" style="width: 200px; height: 200px;" />
    <div class="caption">Back <input type="file" id="fileInputBack" name="fileInputBack" /></div>
  </div>
  <div class="inputoutput">
    <img id="imageSrcLeft" alt="No Image" style="width: 200px; height: 200px;" />
    <div class="caption">Left <input type="file" id="fileInputLeft" name="fileInputLeft" /></div>
  </div>
  <div class="inputoutput">
    <img id="imageSrcRight" alt="No Image" style="width: 200px; height: 200px;" />
    <div class="caption">Right <input type="file" id="fileInputRight" name="fileInputRight" /></div>
  </div>
</div>



<div id="return_update_msg"></div>
<div class="post_submitting" style="display:none;"></div>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>


<script type="text/javascript">
  // Function to handle image file selection
  function handleFileSelect(event, imgElementId) {
    const file = event.target.files[0];
    if (file) {
      const fileType = file.type;
      if (/^image\//.test(fileType)) {
        document.getElementById(imgElementId).src = URL.createObjectURL(file);
      } else {
        console.error("Unsupported file type. Only images are supported.");
      }
    } else {
      console.error("No file selected or file input is not supported.");
    }
  }

  document.getElementById("fileInputFront").addEventListener("change", function(event) {
    handleFileSelect(event, "imageSrcFront");
  }, false);

  document.getElementById("fileInputBack").addEventListener("change", function(event) {
    handleFileSelect(event, "imageSrcBack");
  }, false);

  document.getElementById("fileInputLeft").addEventListener("change", function(event) {
    handleFileSelect(event, "imageSrcLeft");
  }, false);

  document.getElementById("fileInputRight").addEventListener("change", function(event) {
    handleFileSelect(event, "imageSrcRight");
  }, false);

  $(document).ready(function() {
    $("#imageSrcFront").on("click", function(event) {
      var x = event.offsetX;
      var y = event.offsetY;

      // Send coordinates to Flask backend using AJAX
      $.ajax({
        type: "POST",
        url: "/get_coordinates",
        data: JSON.stringify({x: x, y: y}),
        contentType: "application/json",
        success: function(response) {
          console.log(response);
        },
        error: function(error) {
          console.error("Error:", error);
        }
      });
    });



  });
</script>
{% endblock %}
