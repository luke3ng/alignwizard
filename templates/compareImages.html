{% extends "baseTwo.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<h1 id="patientName"></h1>
<p id="patientInfo"></p>

<div class="container">
    <div class="comparison-grid">
        <!-- Left side: Front and Left images -->
        <div class="comparison-image">
            <img id="front_img_1" />
        </div>
        <div class="comparison-image">
            <img id="front_img_2" />
        </div>
        <div class="comparison-image">
            <img id="left_img_1" />
        </div>
        <div class="comparison-image">
            <img id="left_img_2" />
        </div>
        <!-- Right side: Back and Right images -->
        <div class="comparison-image">
            <img id="back_img_1" />
        </div>
        <div class="comparison-image">
            <img id="back_img_2" />
        </div>
        <div class="comparison-image">
            <img id="right_img_1" />
        </div>
        <div class="comparison-image">
            <img id="right_img_2" />
        </div>
    </div>
</div>

<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        const urlParams = new URLSearchParams(window.location.search);
        const patient = urlParams.get('patient');
        const data = {{ data|tojson|safe }};
        console.log("Patient data:", data);

        if (patient) {
            document.getElementById('patientName').textContent = patient;
        }

        if (data.length >= 2) {
            // Process the first set of images
            const item1 = data.find(item => item.id == urlParams.get('date1'));
            if (item1) {
                document.getElementById('front_img_1').src = 'data:image/jpeg;base64,' + item1.frontImage;
                document.getElementById('left_img_1').src = 'data:image/jpeg;base64,' + item1.leftImage;
                document.getElementById('back_img_1').src = 'data:image/jpeg;base64,' + item1.backImage;
                document.getElementById('right_img_1').src = 'data:image/jpeg;base64,' + item1.rightImage;
            }

            // Process the second set of images
            const item2 = data.find(item => item.id == urlParams.get('date2'));
            if (item2) {
                document.getElementById('front_img_2').src = 'data:image/jpeg;base64,' + item2.frontImage;
                document.getElementById('left_img_2').src = 'data:image/jpeg;base64,' + item2.leftImage;
                document.getElementById('back_img_2').src = 'data:image/jpeg;base64,' + item2.backImage;
                document.getElementById('right_img_2').src = 'data:image/jpeg;base64,' + item2.rightImage;
            }
        }
    });
</script>

<style>
    .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        padding: 10px;
    }
    .comparison-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto auto auto;
        gap: 10px;
        width: 100%;
    }
    .comparison-image {
        display: flex;
        justify-content: center;
        align-items: center;
        border: 1px solid #ccc;
        padding: 10px;
    }
    .comparison-image img {
        width: 100%;
        height: auto;
        max-height: 500px; /* Adjust max-height as needed */
        object-fit: contain;
    }
</style>
{% endblock %}
